<!doctype html>
<html lang="cn" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/cn/blog/rss.xml" title="Xin Xiong Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cn/blog/atom.xml" title="Xin Xiong Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Xin Xiong" href="/cn/opensearch.xml"><title data-react-helmet="true">Export &amp; Import of ES6 Module | Xin Xiong</title><meta data-react-helmet="true" property="og:title" content="Export &amp; Import of ES6 Module | Xin Xiong"><meta data-react-helmet="true" name="description" content="为什么不同形式的模块导入/导出会导致 Tree-shaking 效果不同？"><meta data-react-helmet="true" property="og:description" content="为什么不同形式的模块导入/导出会导致 Tree-shaking 效果不同？"><meta data-react-helmet="true" property="og:url" content="https://leonaxiongxin.github.io/cn/blog/2020/07/29/Export-Import-of-ES6-Module"><meta data-react-helmet="true" name="docsearch:language" content="cn"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/cn/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://leonaxiongxin.github.io/cn/blog/2020/07/29/Export-Import-of-ES6-Module"><link data-react-helmet="true" rel="alternate" href="https://leonaxiongxin.github.io/cn/blog/2020/07/29/Export-Import-of-ES6-Module" hreflang="cn"><link data-react-helmet="true" rel="alternate" href="https://leonaxiongxin.github.io/blog/2020/07/29/Export-Import-of-ES6-Module" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://leonaxiongxin.github.io/blog/2020/07/29/Export-Import-of-ES6-Module" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/cn/assets/css/styles.e140522b.css">
<link rel="stylesheet" href="/cn/assets/css/main.5a36db70.css">
<link rel="stylesheet" href="/cn/assets/css/a6aa9e1f.d84a9ece.css">
<link rel="stylesheet" href="/cn/assets/css/ccc49370.d84a9ece.css">
<link rel="preload" href="/cn/assets/js/styles.77895f30.js" as="script">
<link rel="preload" href="/cn/assets/js/runtime~main.30c50a1a.js" as="script">
<link rel="preload" href="/cn/assets/js/main.8823eb63.js" as="script">
<link rel="preload" href="/cn/assets/js/1.9d1d04d3.js" as="script">
<link rel="preload" href="/cn/assets/js/2.628a5347.js" as="script">
<link rel="preload" href="/cn/assets/js/a6aa9e1f.16be7131.js" as="script">
<link rel="preload" href="/cn/assets/js/ccc49370.cf81b741.js" as="script">
<link rel="preload" href="/cn/assets/js/5cea1722.93a48cb0.js" as="script">
<link rel="preload" href="/cn/assets/js/f5b5c2ba.27102973.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cn/"><img src="/cn/img/logo.png" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/cn/img/logo.png" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cn/blog">Blog</a><a class="navbar__item navbar__link" href="/cn/archive">Archive</a><a class="navbar__item navbar__link" href="/cn/about">About</a><a href="https://github.com/leonaxiongxin/leonaxiongxin.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/cn/"><img src="/cn/img/logo.png" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/cn/img/logo.png" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/cn/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/cn/archive">Archive</a></li><li class="menu__list-item"><a class="menu__link" href="/cn/about">About</a></li><li class="menu__list-item"><a href="https://github.com/leonaxiongxin/leonaxiongxin.github.io" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><main class="col col--9"><article><header><h1 class="margin-bottom--sm blogPostTitle_2U-J">Export &amp; Import of ES6 Module</h1><div class="margin-vert--sm"><time datetime="2020-07-29T00:00:00.000Z" class="blogPostDate_n0XG">2020 M07 29 · One min read</time></div><div class="avatar margin-vert--sm"><div class="avatar__intro"></div></div></header><div class="markdown"><p>为什么不同形式的模块导入/导出会导致 Tree-shaking 效果不同？</p><p><a href="https://www.webpackjs.com/guides/tree-shaking/" target="_blank" rel="noopener noreferrer">Tree Shaking</a>，从字面上解释就是把无效代码（dead code）抖掉，通常用于打包输出时，可以有效缩小打包体积。比如在开发时引入一个模块，上线打包时，理想目标是只把用到的部分打包进 bundle 里，其他未使用的部分不需要被打包进来。</p><p>在传统编译型的语言中，由编译器将 Dead Code 从 AST 中删除，dead code指：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">- 代码不会被执行，不可到达</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- 代码执行的结果不会被用到</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- 代码只会影响死变量（只写不读）</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>对于 CommonJS 规范的模块，通过 require 动态引用模块，运行时才加载，不能通过简单的静态分析去做优化，这方面目前 Rollup 和 Parcel 的Tree Shaking支持更好。</p><p>对于 ES6 规范的模块，Tree Shaking 依赖于 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/import" target="_blank" rel="noopener noreferrer">import</a> 和 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/export" target="_blank" rel="noopener noreferrer">export</a> 的<a href="https://exploringjs.com/es6/ch_modules.html#static-module-structure" target="_blank" rel="noopener noreferrer">静态结构特性</a>。</p><p>babel 插件在解析模块时，遇到 import 语句，找到对应路径的文件。但是这个文件可能是一个大的 package，并不是详细路径，需要继续遍历找到确切的需要被打包的代码文件。</p><p><img alt="transform-dynamic-import" src="/cn/assets/images/transform-dynamic-import-cb2ca22aa9ed54a1450d45790b2fedd2.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="export-导出"></a>export 导出<a class="hash-link" href="#export-导出" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="命名导出"></a>命名导出<a class="hash-link" href="#命名导出" title="Direct link to heading">#</a></h3><p>ExportNamedDeclaration, 一个文件可以同时命名导出多个变量 / 函数 / 类，在其他文件导入时命名必须严格相同。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 导出单个</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> myVariable </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">123</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ExportNamedDeclaration, declaration</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">myFunction</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 导出列表</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">myFunction</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> myVariable </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">123</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token exports"> myFunction，myVariable </span><span class="token exports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ExportNamedDeclaration, specifiers</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 导入</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> myFunction </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/modules/my-module.js&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="默认导出"></a>默认导出<a class="hash-link" href="#默认导出" title="Direct link to heading">#</a></h3><p>ExportDefaultDeclaration，一个文件只能默认导出一个变量 / 函数 / 类，在其他文件导入时可以使用其他命名。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 默认导出, ExportDefaultDeclaration</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">default</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">myFunction</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> myVariable </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">123</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 导入</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports">yourFunction</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> myVariable </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/modules/my-module.js&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="重命名导出"></a>重命名导出<a class="hash-link" href="#重命名导出" title="Direct link to heading">#</a></h3><p>ExportNamedDeclaration, 导出时进行重命名，在其他文件导入时必须使用重命名后的名称。</p><p>重定向的命名并不能在本模块使用，只是搭建一个重定向的桥梁；如果需要在本模块内使用，则先导入、再导出，否则重复导入两次 Tree Shaking 在处理时会有问题。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">myFunction</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token exports"> myFunction </span><span class="token exports keyword module" style="font-style:italic">as</span><span class="token exports"> yourFunction </span><span class="token exports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ExportNamedDeclaration, specifier.local.name, specifier.exported.name</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 导入</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> yourFunction </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/modules/my-module.js&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="模块重定向"></a>模块重定向<a class="hash-link" href="#模块重定向" title="Direct link to heading">#</a></h3><p>ExportNamedDeclaration or ExportAllDeclaration, 在当前模块中，导出指定导入模块的默认导出，相当于是创建了一个“重定向”。</p><p>通常在业务包的 index 文件里使用，这样我们在其他模块导入时可以直接写包路径，而不用写一长串的具体路径。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token exports"> </span><span class="token exports keyword module" style="font-style:italic">default</span><span class="token exports"> </span><span class="token exports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;./other-module&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ExportNamedDeclaration</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token exports operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;./other-module&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ExportAllDeclaration</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="import-导入"></a>import 导入<a class="hash-link" href="#import-导入" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="导入列表"></a>导入列表<a class="hash-link" href="#导入列表" title="Direct link to heading">#</a></h3><p>ImportSpecifier, 导入默认值</p><p>ImportDefaultSpecifier, 在目标文件是默认导出，导入时可以使用其他命名。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 默认导出, ExportDefaultDeclaration</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">default</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">myFunction</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> myVariable </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">123</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 导入默认值、导入列表，会解析为两行 newLine</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports">yourFunction</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> myVariable </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/modules/my-module.js&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="导入时重命名"></a>导入时重命名<a class="hash-link" href="#导入时重命名" title="Direct link to heading">#</a></h3><p>ImportSpecifier</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> reallyReallyLongModuleExportName </span><span class="token imports keyword module" style="font-style:italic">as</span><span class="token imports"> shortName  </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/modules/my-module.js&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="导入整个模块的内容"></a>导入整个模块的内容<a class="hash-link" href="#导入整个模块的内容" title="Direct link to heading">#</a></h3><p>ImportNamespaceSpecifier, 全量引入，谨慎使用，打包体积可能会很大</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports operator" style="color:rgb(137, 221, 255)">*</span><span class="token imports"> </span><span class="token imports keyword module" style="font-style:italic">as</span><span class="token imports"> myModule</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/modules/my-module.js&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 拒绝全量导入 lodash 及类似的代码</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports">lodash</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;lodash&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 而应该使用</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports">debounce</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;lodash/debounce&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 对于组件库可以使用导入列表的方式，具体要看依赖包的导出方式</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">SlideModal</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@ss/mtd-react-native&#x27;</span><span class="token plain"> </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="动态导入"></a>动态导入<a class="hash-link" href="#动态导入" title="Direct link to heading">#</a></h3><p>在解析时，其他都是 ImportDeclaration，动态导入是 CallExpression</p><p>在遇到动态导入时，会把该模块单独打包得到一个 chunk，以实现按需加载（在使用时才导入）。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/modules/my-module.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Do something with the module.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> module </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">await</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">import</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/modules/my-module.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="仅为副作用导入一个模块"></a>仅为副作用导入一个模块<a class="hash-link" href="#仅为副作用导入一个模块" title="Direct link to heading">#</a></h3><p>整个模块仅为副作用（中性词）而导入，将会运行模块中的全局代码, 但实际上不导入模块中的任何内容（接口）。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/modules/my-module.js&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="结论"></a>结论<a class="hash-link" href="#结论" title="Direct link to heading">#</a></h2><ol><li><p>默认导出与导入默认值配对使用，为了避免命名冲突在导入时可以使用其他命名。为了更好的 Tree Shaking，from 后接详细路径。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">default</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">extends</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">PureComponent</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports">anyName</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;./BottomSheet&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>命名导出与导入列表配对使用，在导入时严格使用相同的变量名（这个应该没问题，变量名不一致 IDE lint 会报错），可以重命名。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">BottomSheet</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">React</span><span class="token class-name punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token class-name" style="color:rgb(255, 203, 107)">PureComponent</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">BottomSheet</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;./BottomSheet&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>避免全量导入，尽量使用部分导入或导入列表。如果不得不使用全量导入，为了更好的 Tree Shaking，from 后接详细路径。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports">lodash</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;lodash&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// no</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports">debounce</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;lodash/debounce&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// yes</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>模块文件夹下的 index 文件可作为模块重定向的“桥梁”，避免详细路径过长的情况。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// @hfe/mrn-bus-common/lib/components/index.ts</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token exports"> </span><span class="token exports maybe-class-name">BottomSheet</span><span class="token exports punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token exports"> </span><span class="token exports maybe-class-name">NativeBottomSheet</span><span class="token exports"> </span><span class="token exports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;./BottomSheet/BottomSheet&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// @hfe/mrn-bus-common/index.ts</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token exports operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;./lib/components&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 使用</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">BottomSheet</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@hfe/mrn-bus-common/lib/components/&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// yes but long</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">BottomSheet</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@hfe/mrn-bus-common&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// yes</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>避免重复的导入。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token imports"></span><span class="token imports maybe-class-name">PageStatus</span><span class="token imports"> </span><span class="token imports keyword module" style="font-style:italic">as</span><span class="token imports"> </span><span class="token imports maybe-class-name">FavoriteBusStatus</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token imports"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token imports"></span><span class="token imports maybe-class-name">FavoriteComponent</span><span class="token imports"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token imports"></span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@hfe/mrn-bus-time-business&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token exports"> </span><span class="token exports maybe-class-name">FavoriteBusStatus</span><span class="token exports"> </span><span class="token exports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// yes</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token exports"> </span><span class="token exports maybe-class-name">PageStatus</span><span class="token exports"> </span><span class="token exports keyword module" style="font-style:italic">as</span><span class="token exports"> </span><span class="token exports maybe-class-name">FavoriteBusStatus</span><span class="token exports"> </span><span class="token exports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@hfe/mrn-bus-time-business&#x27;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// no</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li></ol></div><footer class="row margin-vert--md"><div class="col"><svg class="icon_11fs" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="16" height="16"><title>tags</title><defs><style></style></defs><path d="M995.127 635.047l-360.08 360.08a53.333 53.333 0 01-71.333 3.68l356.22-356.22a64 64 0 000-90.507L495.84 128h45.574a52.987 52.987 0 0137.713 15.62l416 416a53.4 53.4 0 010 75.427zm-128-75.427l-416-416A52.987 52.987 0 00413.414 128h-74.567a361.707 361.707 0 012.487 42.667c0 42.713-7.267 83.2-20.474 114-5.146 12-10.746 21.546-16.48 29.08a85.287 85.287 0 11-48.38-15.08c6 0 16.574-9.64 25.647-30.807 10.813-25.24 17.02-60.667 17.02-97.193A314.76 314.76 0 00295.794 128h-79.587c2.82-20.533 7.653-39.367 14.147-54.527C239.427 52.307 250 42.667 256 42.667s16.574 9.64 25.647 30.806c6.493 15.16 11.333 34 14.147 54.527h43.053c-3.167-26.56-9.287-51.047-18-71.333C299.734 7.333 271.154 0 256 0s-43.733 7.333-64.86 56.667c-8.666 20.286-14.82 44.773-18 71.333H53.334A53.393 53.393 0 000 181.333v360.08a52.987 52.987 0 0015.62 37.714l416 416a53.333 53.333 0 0075.427 0l360.08-360.08a53.4 53.4 0 000-75.427z" fill="#789262"></path></svg><a class="margin-horiz--sm" href="/cn/blog/tags/fe">FE</a><a class="margin-horiz--sm" href="/cn/blog/tags/module">Module</a><a class="margin-horiz--sm" href="/cn/blog/tags/webpack">Webpack</a></div></footer></article><div></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/cn/blog/2020/07/31/How-to-Improve-Performance-of-WebView"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">« How to Improve Performance of WebView</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/cn/blog/2020/06/14/Take-a-Look-at-React-Components"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Take a Look at React Components »</div></a></div></nav></div></main><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#export-导出" class="table-of-contents__link">export 导出</a><ul><li><a href="#命名导出" class="table-of-contents__link">命名导出</a></li><li><a href="#默认导出" class="table-of-contents__link">默认导出</a></li><li><a href="#重命名导出" class="table-of-contents__link">重命名导出</a></li><li><a href="#模块重定向" class="table-of-contents__link">模块重定向</a></li></ul></li><li><a href="#import-导入" class="table-of-contents__link">import 导入</a><ul><li><a href="#导入列表" class="table-of-contents__link">导入列表</a></li><li><a href="#导入时重命名" class="table-of-contents__link">导入时重命名</a></li><li><a href="#导入整个模块的内容" class="table-of-contents__link">导入整个模块的内容</a></li><li><a href="#动态导入" class="table-of-contents__link">动态导入</a></li><li><a href="#仅为副作用导入一个模块" class="table-of-contents__link">仅为副作用导入一个模块</a></li></ul></li><li><a href="#结论" class="table-of-contents__link">结论</a></li></ul></div></div></div></div></div><footer class="footer"><div class="row"><div class="col col--3 footerLeft_37Uk"><div class="col"><ul class="footer__items footerItems_1Qot"><li class="footer__item footerItemLink_2bF2"><a href="https://www.zhihu.com/people/xiong-xin-64-58" target="_blank" rel="noopener noreferrer" class="footer__link-item"><svg class="icon_24ss" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="16" height="16"><title>知乎</title><defs><style></style></defs><path d="M512 73.28A438.72 438.72 0 10950.72 512 438.72 438.72 0 00512 73.28zm-98.56 458.88l-16.8 66.88 23.68-20.8s53.92 61.28 64 76.48 1.44 68.96 1.44 68.96l-92.48-113.12s-29.12 101.12-68.48 124.16a97.6 97.6 0 01-80 6.56 342.08 342.08 0 0085.44-89.76 382.88 382.88 0 0039.52-119.36H254.72s8.8-40.48 24.16-41.6 90.88 0 90.88 0L368 365.76 324.8 368a96 96 0 01-32 48c-24.16 17.44-38.4 10.88-38.4 10.88s42.72-118.24 55.84-141.28 50.4-25.12 50.4-25.12L337.6 327.2h147.84c17.6 0 18.56 40.64 18.56 40.64h-90.56V490.4s61.28-2.24 81.12 0 19.68 41.6 19.68 41.6zm329.44 160h-91.52l-65.12 46.24-13.6-46.24h-36.96v-368h208z" fill="#49C0FB"></path><path d="M602.88 691.68l54.88-41.44h43.04v-285.6H579.68v285.6h11.2l12 41.44z" fill="#49C0FB"></path></svg></a></li><li class="footer__item footerItemLink_2bF2"><a href="https://www.douban.com/people/157300719/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><svg class="icon_24ss" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="16" height="16"><title>豆瓣</title><defs><style></style></defs><path d="M411.52 574.72A969.92 969.92 0 01471.36 692h83.36a668.16 668.16 0 0060.8-117.28z" fill="#61CD72"></path><path d="M512 73.28A438.72 438.72 0 10950.72 512 438.72 438.72 0 00512 73.28zm-215.36 228.8h434.88v44.16H296.64zM741.6 736H283.52v-44h136.96A612.8 612.8 0 00368 597.44l35.2-22.72h-62.4v-176h348v176H624l35.36 23.2A633.12 633.12 0 01608 692h134.24z" fill="#61CD72"></path><path d="M389.44 443.68H640v86.56H389.44z" fill="#61CD72"></path></svg></a></li><li class="footer__item footerItemLink_2bF2"><a href="https://github.com/leonaxiongxin" target="_blank" rel="noopener noreferrer" class="footer__link-item"><svg class="icon_24ss" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="16" height="16"><title>Github</title><defs><style></style></defs><path d="M511.968 73.152q119.424 0 220.288 58.848t159.712 159.712T950.816 512q0 143.424-83.712 258.016t-216.288 158.56q-15.424 2.848-22.848-4t-7.424-17.152q0-1.728.288-43.712t.288-76.864q0-55.424-29.728-81.152 32.576-3.424 58.56-10.272t53.728-22.272 46.272-38.016 30.272-60 11.712-86.016q0-68-45.152-117.728 21.152-52-4.576-116.576-16-5.152-46.272 6.272T643.36 286.24l-21.728 13.728Q568.48 285.12 511.904 285.12t-109.728 14.848q-9.152-6.272-24.288-15.424t-47.712-22.016-48.576-7.712q-25.728 64.576-4.576 116.576-45.152 49.728-45.152 117.728 0 48.576 11.712 85.728t30.016 60 46.016 38.272 53.728 22.272 58.56 10.272q-22.272 20.576-28 58.848-12 5.728-25.728 8.576t-32.576 2.848-37.44-12.288-31.712-35.712q-10.848-18.272-27.712-29.728t-28.288-13.728l-11.424-1.728q-12 0-16.576 2.56t-2.848 6.56 5.152 8 7.424 6.848l4 2.848q12.576 5.728 24.864 21.728t18.016 29.152l5.728 13.152q7.424 21.728 25.152 35.136t38.272 17.152 39.712 4 31.712-2.016l13.152-2.272q0 21.728.288 50.56t.288 31.136q0 10.272-7.424 17.152t-22.848 4q-132.576-44-216.288-158.56T73.088 511.872q0-119.424 58.848-220.288t159.712-159.712 220.288-58.848zM239.392 703.424q1.728-4-4-6.848-5.728-1.728-7.424 1.152-1.728 4 4 6.848 5.152 3.424 7.424-1.152zm17.728 19.424q4-2.848-1.152-9.152-5.728-5.152-9.152-1.728-4 2.848 1.152 9.152 5.728 5.728 9.152 1.728zm17.152 25.728q5.152-4 0-10.848-4.576-7.424-9.728-3.424-5.152 2.848 0 10.272t9.728 4zm24 24Q302.848 768 296 761.728q-6.848-6.848-11.424-1.728-5.152 4.576 2.272 10.848 6.848 6.848 11.424 1.728zm32.576 14.272q1.728-6.272-7.424-9.152-8.576-2.272-10.848 4t7.424 8.576q8.576 3.424 10.848-3.424zm36 2.88q0-7.424-9.728-6.272-9.152 0-9.152 6.272 0 7.424 9.728 6.272 9.152 0 9.152-6.272zm33.12-5.728q-1.152-6.272-10.272-5.152-9.152 1.728-8 8.576T391.968 792t8-8z"></path></svg></a></li><li class="footer__item footerItemLink_2bF2"><a href="https://www.linkedin.com/in/xinxiong96" target="_blank" rel="noopener noreferrer" class="footer__link-item"><svg class="icon_24ss" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="16" height="16"><title>Linkedin</title><defs><style></style></defs><path d="M0 512C0 229.227 229.227 0 512 0s512 229.227 512 512-229.227 512-512 512S0 794.773 0 512z" fill="#0077B5"></path><path d="M369.472 316.224c0 33.472-25.195 60.245-65.664 60.245h-.747c-38.954 0-64.128-26.773-64.128-60.245 0-34.197 25.942-60.224 65.643-60.224s64.128 26.027 64.896 60.224zm-7.637 107.84v348.63H245.803v-348.63h116.032zm418.432 348.63V572.8c0-107.093-57.238-156.928-133.59-156.928-61.61 0-89.173 33.835-104.576 57.579v-49.387H426.048c1.536 32.725 0 348.63 0 348.63h116.053v-194.71c0-10.41.747-20.8 3.819-28.267 8.384-20.821 27.477-42.368 59.541-42.368 41.984 0 58.774 31.979 58.774 78.827v186.517h116.032z" fill="#FFF"></path></svg></a></li></ul></div></div><div class="col col--9 footer__bottom text--center footerRight_oIT5"><div class="footerCopyright_Jlwn">Copyright © 2018-2021 Xin Xiong. Built with <a href="https://docusaurus.io/">Docusaurus</a> and 💙.</div></div></div></footer></div>
<script src="/cn/assets/js/styles.77895f30.js"></script>
<script src="/cn/assets/js/runtime~main.30c50a1a.js"></script>
<script src="/cn/assets/js/main.8823eb63.js"></script>
<script src="/cn/assets/js/1.9d1d04d3.js"></script>
<script src="/cn/assets/js/2.628a5347.js"></script>
<script src="/cn/assets/js/a6aa9e1f.16be7131.js"></script>
<script src="/cn/assets/js/ccc49370.cf81b741.js"></script>
<script src="/cn/assets/js/5cea1722.93a48cb0.js"></script>
<script src="/cn/assets/js/f5b5c2ba.27102973.js"></script>
</body>
</html>